<rv-content-pane close-panel="self.actions.toggleLayerGroup()">
    <div class="rv-toc">

        <!--{{ self.geoService.legend }} -->

        <!-- Do not ask me what `dx-start-with` and `dx-connect` are and how this whole thing works as I'm not completely understan it myself. I'll update this comment when I get it. Read this is you are curious: https://github.com/dotJEM/angular-tree -->
        <ul class="rv-layer-list rv-root" dx-start-with="self.geoService.legend">
            <!--{ item }}-->
            <li ng-repeat="item in $dxPrior.items track by item.id" class="rv-toggle-slide">
                <rv-layer-item
                    layer="item"
                    ng-if="item.items === undefined"
                    ng-class="[{ 'rv-selected': item.selected }, item.state ]"></rv-layer-item>

                <div class="rv-layer-level rv-{{ $dxLevel }}" ng-if="item.items !== undefined">

                    <rv-layer-group-toggle group="item"></rv-layer-group-toggle>

                    <ul class="rv-layer-list rv-toggle-slide" dx-connect="item" ng-show="item.expanded"></ul>

                    <div class="rv-shadow"></div>

                    <md-progress-linear class="rv-toc-progress-indicator" md-mode="indeterminate" ng-show="item.isLoading"></md-progress-linear>

                </div>
            </li>
            <md-divider class="rv-layer-list-divider"></md-divider>
        </ul>

    </div>
</rv-content-pane>
